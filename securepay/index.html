<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            margin: 0;
            display: flex;
        }

        iframe {
            border: 0;
            padding: 0;
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            margin: 0;
        }
        .option-btn{
          z-index: 99;
        }
    </style>

    <script>
      
var promotionData = {
    "id": 2587,
    "name": "Pilot Offer Promotion 111",
    "hotel": {
      "id": 262,
      "name": "SOFITEL Dubai Jumeirah Beach",
      "currency": "AED",
      "currencyFormat": "#,####,##0.00"
    },
    "department": {
      "id": 1493,
      "name": "Management"
    },
    "displayTemplate": {
      "id": 2558,
      "name": "Pilot Offer Template",
      "description": "The Sofitel Dubai Jumeirah Beach pilot offer template"
    },
    "taxes": [
      {
        "id": 3916,
        "tax": {
          "id": 3917,
          "name": "Service Charge",
          "taxType": "percentage"
        },
        "amount": 10.0000
      },
      {
        "id": 3918,
        "tax": {
          "id": 3919,
          "name": "VAT",
          "taxType": "percentage"
        },
        "amount": 5.0000
      },
      {
        "id": 3920,
        "tax": {
          "id": 3921,
          "name": "Set Fee 1",
          "taxType": "absolute"
        },
        "amount": 20.0000
      }
    ],
    "multiplePurchasesAllowed": {
      "maximum": 0,
      "minimum": 0
    },
    "maxAttendeesPerDate":99,
    "promotionDates": {
      "staticDates":{
        "dates":["2021-05-25", "2021-05-26"]
      }
    },
    "promotionText": "This is the promotion text with a <a href='https://website.com'>link</a> embedded in the text...",
    "contactName": "Bianca Nastase",
    "contactEmail": "h6146-sl@sofitel.com",
    "contactPhone": "+98 765 43 2100",
    "footerText": "This is the footer text with a <b>bold</b> word that is also <span style='color:green;'>green</span>.",
    "notifyEmails": [
      "bcc_2@email.com",
      "bcc_1@email.com"
    ],
    "activeDateRange": {
      "minimum": "2021-06-01",
      "maximum": "2021-08-31"
    },
    "customCSS": "input[name='acceptT&C'] + span { font-weight: bold; color: red; }",
    "categories": [{
      "id": 3914,
      "name": "Category 1",
      "description": "Description of category 1.",
      "showHeadings": false,
      "questions": [{
        "dateQuestion": {
          "id": 3915,
          "title": "Same as Promotion Date Question",
          "description": "Date question that uses promotion dates",
          "showHeadings": true,
          "mandatory": true,
          "basePrices": {
            "sunday": 50,
            "monday": 50,
            "tuesday": 50,
            "wednesday": 50,
            "thursday": 50,
            "friday": 50,
            "saturday": 50
          },
          "pricingMethod": "perNight",
          "possibleDates":{
            "staticDatesWithPricing":
              {"dates":{
                "2021-05-25":10,
                "2021-05-26":0
              },
              "tempId":"0b3knsqcdhxgtw05iw0ikgamt2lxfwss"
            }
          },
          "taxes": [
            {
              "id": 3916,
              "tax": {
                "id": 3917,
                "name": "Service Charge",
                "taxType": "percentage"
              },
              "amount": 10.0000
            },
            {
              "id": 3918,
              "tax": {
                "id": 3919,
                "name": "VAT",
                "taxType": "percentage"
              },
              "amount": 5.0000
            },
            {
              "id": 3920,
              "tax": {
                "id": 3921,
                "name": "Set Fee 1",
                "taxType": "absolute"
              },
              "amount": 20.0000
            },
            {
              "id": 4000,
              "tax": {
                "tempID": "0ooonsqcdhxgtw05gw0ikgamt2lxfwss",
                "name": "State Duty",
                "taxType": "absolute"
              },
              "amount": 15.0000
            }
          ],
          "selectMultiple": {
            "minimum": 1,
            "maximum": 4
          },
          "selectMultipleType": "dateRange",
          "buyMultiple": {
            "minimum": 1,
            "maximum": 10
          }
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2591,
          "title": "Occupancy",
          "description": "The number of people staying",
          "mandatory": true,
          "options": [{
            "id": 2592,
            "title": "Single",
            "description": "1 person per room",
            "cost": 0.0000
          },
          {
            "id": 2593,
            "title": "Double",
            "description": "2 people per room",
            "cost": 0.0000
          },
          {
            "id": 2594,
            "title": "Triple",
            "description": "3 people per room",
            "cost": 0.0000
          }
          ],
          "selectMultiple": false,
          "buyMultiple": false
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2595,
          "title": "Room Type",
          "description": "The type of room to book",
          "mandatory": true,
          "displayCriteria": {
            "id": 2630,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "Single"
          },
          "options": [{
            "id": 2596,
            "title": "Single Standard",
            "description": "A 1-person standard room",
            "cost": 1200.0000
          },
          {
            "id": 2597,
            "title": "Single Luxury",
            "description": "A 1-person luxury room",
            "cost": 1300.0000
          },
          {
            "id": 2598,
            "title": "Single Suite",
            "description": "A 1-person suite",
            "cost": 1500.0000
          }
          ],
          "selectMultiple": true,
          "buyMultiple": true,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2605,
          "title": "Room Type",
          "description": "The type of room to book",
          "mandatory": true,
          "displayCriteria": {
            "id": 2631,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "Double"
          },
          "options": [{
            "id": 2606,
            "title": "Double Standard",
            "description": "A 2-person standard room",
            "cost": 2200.0000
          },
          {
            "id": 2607,
            "title": "Double Luxury",
            "description": "A 2-person luxury room",
            "cost": 2300.0000
          },
          {
            "id": 2608,
            "title": "Double Suite",
            "description": "A 2-person suite",
            "cost": 2500.0000
          }
          ],
          "selectMultiple": true,
          "buyMultiple": true,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2609,
          "title": "Room Type",
          "description": "The type of room to book",
          "mandatory": true,
          "displayCriteria": {
            "id": 2632,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "Triple"
          },
          "options": [{
            "id": 2610,
            "title": "Triple Standard",
            "description": "A 3-person standard room",
            "cost": 3200.0000
          },
          {
            "id": 2611,
            "title": "Triple Luxury",
            "description": "A 3-person luxury room",
            "cost": 3300.0000
          },
          {
            "id": 2612,
            "title": "Triple Suite",
            "description": "A 3-person suite",
            "cost": 3500.0000
          }
          ],
          "selectMultiple": true,
          "buyMultiple": true,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2613,
          "title": "Booking Type",
          "description": "The type of booking to make (Single Room)",
          "mandatory": true,
          "displayCriteria": {
            "id": 2630,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "Single"
          },
          "options": [{
            "id": 2614,
            "title": "Room Only",
            "description": "Just the room",
            "cost": 0.0000
          },
          {
            "id": 2615,
            "title": "Half Board",
            "description": "Room + breakfast",
            "cost": 100.0000
          },
          {
            "id": 2616,
            "title": "Full Board",
            "description": "Room + breakfast + dinner",
            "cost": 150.0000
          }
          ],
          "selectMultiple": false,
          "buyMultiple": false,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2617,
          "title": "Booking Type",
          "description": "The type of booking to make (Double Room)",
          "mandatory": true,
          "displayCriteria": {
            "id": 2631,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "2593"
          },
          "options": [{
            "id": 2618,
            "title": "Room Only",
            "description": "Just the room",
            "cost": 0.0000
          },
          {
            "id": 2619,
            "title": "Half Board",
            "description": "Room + breakfast",
            "cost": 200.0000
          },
          {
            "id": 2620,
            "title": "Full Board",
            "description": "Room + breakfast + dinner",
            "cost": 300.0000
          }
          ],
          "selectMultiple": false,
          "buyMultiple": false,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2621,
          "title": "Booking Type",
          "description": "The type of booking to make (Triple Room)",
          "mandatory": true,
          "displayCriteria": {
            "id": 2632,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "2594"
          },
          "options": [{
            "id": 2622,
            "title": "Room Only",
            "description": "Just the room",
            "cost": 0.0000
          },
          {
            "id": 2623,
            "title": "Half Board",
            "description": "Room + breakfast",
            "cost": 300.0000
          },
          {
            "id": 2624,
            "title": "Full Board",
            "description": "Room + breakfast + dinner",
            "cost": 450.0000
          }
          ],
          "selectMultiple": false,
          "buyMultiple": false,
          "taxes": [{
            "id": 2599,
            "tax": {
              "id": 2600,
              "name": "Service Charge",
              "taxType": "percentage"
            },
            "amount": 10.0000
          },
          {
            "id": 2601,
            "tax": {
              "id": 2602,
              "name": "VAT",
              "taxType": "percentage"
            },
            "amount": 5.5000
          },
          {
            "id": 2603,
            "tax": {
              "id": 2604,
              "name": "Municipality Fee",
              "taxType": "percentage"
            },
            "amount": 5.0000
          }
          ],
          "pricingDependsOn": 2590
        }
      }
      ]
    },
    {
      "id": 2625,
      "name": "Personal Information",
      "description": "Required personal information",
      "questions": [{
        "shortTextQuestion": {
          "id": 2626,
          "title": "First Name",
          "description": "Your first name",
          "mandatory": true,
          "contentType": "text"
        }
      },
      {
        "shortTextQuestion": {
          "id": 2627,
          "title": "Last Name",
          "description": "Your surname",
          "mandatory": true,
          "contentType": "text"
        }
      },
      {
        "shortTextQuestion": {
          "id": 2628,
          "title": "Email",
          "description": "Your email address",
          "mandatory": true,
          "contentType": "emailAddress"
        }
      },
      {
        "shortTextQuestion": {
          "id": 2629,
          "title": "Phone",
          "description": "Your phone number",
          "mandatory": false,
          "contentType": "phoneNumber"
        }
      }
      ]
    }
    ],
    "uuid": "6685cab6-d71b-4c0a-8677-03a4c07cd2a9",
    "promotionLink": "/promotion/fa20aff4-4102-4450-b7a1-57f6808927e5",
    "enabled": true,
    "createdBy": {
      "id": 270,
      "username": "sofitelDubaiJumeirahBeach_pd",
      "firstName": "Phil",
      "lastName": "Duhs"
    }
  };

var promotionData2 = {
    "id": 2587,
    "name": "Pilot Offer Promotion 222",
    "hotel": {
      "id": 262,
      "name": "SOFITEL Dubai Jumeirah Beach",
      "currency": "AED",
      "currencyFormat": "#,####,##0.00"
    },
    "department": {
      "id": 1493,
      "name": "Management"
    },
    "displayTemplate": {
      "id": 2558,
      "name": "Pilot Offer Template",
      "description": "The Sofitel Dubai Jumeirah Beach pilot offer template"
    },
    "taxes": [
      {
        "id": 3916,
        "tax": {
          "id": 3917,
          "name": "Service Charge",
          "taxType": "percentage"
        },
        "amount": 10.0000
      },
      {
        "id": 3918,
        "tax": {
          "id": 3919,
          "name": "VAT",
          "taxType": "percentage"
        },
        "amount": 5.0000
      },
      {
        "id": 3920,
        "tax": {
          "id": 3921,
          "name": "Set Fee 1",
          "taxType": "absolute"
        },
        "amount": 20.0000
      }
    ],
    "multiplePurchasesAllowed": {
      "maximum": 0,
      "minimum": 0
    },
    "maxAttendeesPerDate":99,
    "promotionDates": {
      "staticDates":{
        "dates":["2021-05-25", "2021-05-26"]
      }
    },
    "promotionText": "This is the promotion text with a <a href='https://website.com'>link</a> embedded in the text...",
    "contactName": "Bianca Nastase",
    "contactEmail": "h6146-sl@sofitel.com",
    "contactPhone": "+98 765 43 2100",
    "footerText": "This is the footer text with a <b>bold</b> word that is also <span style='color:green;'>green</span>.",
    "notifyEmails": [
      "bcc_2@email.com",
      "bcc_1@email.com"
    ],
    "activeDateRange": {
      "minimum": "2021-06-01",
      "maximum": "2021-08-31"
    },
    "customCSS": "input[name='acceptT&C'] + span { font-weight: bold; color: red; }",
    "categories": [{
      "id": 3914,
      "name": "Category 1",
      "description": "Description of category 1.",
      "showHeadings": false,
      "questions": [{
        "dateQuestion": {
          "id": 3915,
          "title": "Same as Promotion Date Question",
          "description": "Date question that uses promotion dates",
          "showHeadings": true,
          "mandatory": true,
          "basePrices": {
            "sunday": 50,
            "monday": 50,
            "tuesday": 50,
            "wednesday": 50,
            "thursday": 50,
            "friday": 50,
            "saturday": 50
          },
          "pricingMethod": "perNight",
          "possibleDates":{
            "staticDatesWithPricing":
              {"dates":{
                "2021-05-25":10,
                "2021-05-26":0
              },
              "tempId":"0b3knsqcdhxgtw05iw0ikgamt2lxfwss"
            }
          },
          "taxes": [
            {
              "id": 3916,
              "tax": {
                "id": 3917,
                "name": "Service Charge",
                "taxType": "percentage"
              },
              "amount": 10.0000
            },
            {
              "id": 3918,
              "tax": {
                "id": 3919,
                "name": "VAT",
                "taxType": "percentage"
              },
              "amount": 5.0000
            },
            {
              "id": 3920,
              "tax": {
                "id": 3921,
                "name": "Set Fee 1",
                "taxType": "absolute"
              },
              "amount": 20.0000
            },
            {
              "id": 4000,
              "tax": {
                "tempID": "0ooonsqcdhxgtw05gw0ikgamt2lxfwss",
                "name": "State Duty",
                "taxType": "absolute"
              },
              "amount": 15.0000
            }
          ],
          "selectMultiple": {
            "minimum": 1,
            "maximum": 4
          },
          "selectMultipleType": "dateRange",
          "buyMultiple": {
            "minimum": 1,
            "maximum": 10
          }
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2591,
          "title": "Occupancy",
          "description": "The number of people staying",
          "mandatory": true,
          "options": [{
            "id": 2592,
            "title": "Single",
            "description": "1 person per room",
            "cost": 0.0000
          },
          {
            "id": 2593,
            "title": "Double",
            "description": "2 people per room",
            "cost": 0.0000
          },
          {
            "id": 2594,
            "title": "Triple",
            "description": "3 people per room",
            "cost": 0.0000
          }
          ],
          "selectMultiple": false,
          "buyMultiple": false
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2595,
          "title": "Room Type",
          "description": "The type of room to book",
          "mandatory": true,
          "displayCriteria": {
            "id": 2630,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "Single"
          },
          "options": [{
            "id": 2596,
            "title": "Single Standard",
            "description": "A 1-person standard room",
            "cost": 1200.0000
          },
          {
            "id": 2597,
            "title": "Single Luxury",
            "description": "A 1-person luxury room",
            "cost": 1300.0000
          },
          {
            "id": 2598,
            "title": "Single Suite",
            "description": "A 1-person suite",
            "cost": 1500.0000
          }
          ],
          "selectMultiple": true,
          "buyMultiple": true,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2605,
          "title": "Room Type",
          "description": "The type of room to book",
          "mandatory": true,
          "displayCriteria": {
            "id": 2631,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "Double"
          },
          "options": [{
            "id": 2606,
            "title": "Double Standard",
            "description": "A 2-person standard room",
            "cost": 2200.0000
          },
          {
            "id": 2607,
            "title": "Double Luxury",
            "description": "A 2-person luxury room",
            "cost": 2300.0000
          },
          {
            "id": 2608,
            "title": "Double Suite",
            "description": "A 2-person suite",
            "cost": 2500.0000
          }
          ],
          "selectMultiple": true,
          "buyMultiple": true,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2609,
          "title": "Room Type",
          "description": "The type of room to book",
          "mandatory": true,
          "displayCriteria": {
            "id": 2632,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "Triple"
          },
          "options": [{
            "id": 2610,
            "title": "Triple Standard",
            "description": "A 3-person standard room",
            "cost": 3200.0000
          },
          {
            "id": 2611,
            "title": "Triple Luxury",
            "description": "A 3-person luxury room",
            "cost": 3300.0000
          },
          {
            "id": 2612,
            "title": "Triple Suite",
            "description": "A 3-person suite",
            "cost": 3500.0000
          }
          ],
          "selectMultiple": true,
          "buyMultiple": true,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2613,
          "title": "Booking Type",
          "description": "The type of booking to make (Single Room)",
          "mandatory": true,
          "displayCriteria": {
            "id": 2630,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "Single"
          },
          "options": [{
            "id": 2614,
            "title": "Room Only",
            "description": "Just the room",
            "cost": 0.0000
          },
          {
            "id": 2615,
            "title": "Half Board",
            "description": "Room + breakfast",
            "cost": 100.0000
          },
          {
            "id": 2616,
            "title": "Full Board",
            "description": "Room + breakfast + dinner",
            "cost": 150.0000
          }
          ],
          "selectMultiple": false,
          "buyMultiple": false,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2617,
          "title": "Booking Type",
          "description": "The type of booking to make (Double Room)",
          "mandatory": true,
          "displayCriteria": {
            "id": 2631,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "2593"
          },
          "options": [{
            "id": 2618,
            "title": "Room Only",
            "description": "Just the room",
            "cost": 0.0000
          },
          {
            "id": 2619,
            "title": "Half Board",
            "description": "Room + breakfast",
            "cost": 200.0000
          },
          {
            "id": 2620,
            "title": "Full Board",
            "description": "Room + breakfast + dinner",
            "cost": 300.0000
          }
          ],
          "selectMultiple": false,
          "buyMultiple": false,
          "pricingDependsOn": 2590
        }
      },
      {
        "multiChoiceQuestion": {
          "id": 2621,
          "title": "Booking Type",
          "description": "The type of booking to make (Triple Room)",
          "mandatory": true,
          "displayCriteria": {
            "id": 2632,
            "comparisonQuestion": 2591,
            "comparisonType": "equalTo",
            "comparisonValue": "2594"
          },
          "options": [{
            "id": 2622,
            "title": "Room Only",
            "description": "Just the room",
            "cost": 0.0000
          },
          {
            "id": 2623,
            "title": "Half Board",
            "description": "Room + breakfast",
            "cost": 300.0000
          },
          {
            "id": 2624,
            "title": "Full Board",
            "description": "Room + breakfast + dinner",
            "cost": 450.0000
          }
          ],
          "selectMultiple": false,
          "buyMultiple": false,
          "taxes": [{
            "id": 2599,
            "tax": {
              "id": 2600,
              "name": "Service Charge",
              "taxType": "percentage"
            },
            "amount": 10.0000
          },
          {
            "id": 2601,
            "tax": {
              "id": 2602,
              "name": "VAT",
              "taxType": "percentage"
            },
            "amount": 5.5000
          },
          {
            "id": 2603,
            "tax": {
              "id": 2604,
              "name": "Municipality Fee",
              "taxType": "percentage"
            },
            "amount": 5.0000
          }
          ],
          "pricingDependsOn": 2590
        }
      }
      ]
    },
    {
      "id": 2625,
      "name": "Personal Information",
      "description": "Required personal information",
      "questions": [{
        "shortTextQuestion": {
          "id": 2626,
          "title": "First Name",
          "description": "Your first name",
          "mandatory": true,
          "contentType": "text"
        }
      },
      {
        "shortTextQuestion": {
          "id": 2627,
          "title": "Last Name",
          "description": "Your surname",
          "mandatory": true,
          "contentType": "text"
        }
      },
      {
        "shortTextQuestion": {
          "id": 2628,
          "title": "Email",
          "description": "Your email address",
          "mandatory": true,
          "contentType": "emailAddress"
        }
      },
      {
        "shortTextQuestion": {
          "id": 2629,
          "title": "Phone",
          "description": "Your phone number",
          "mandatory": false,
          "contentType": "phoneNumber"
        }
      }
      ]
    }
    ],
    "uuid": "6685cab6-d71b-4c0a-8677-03a4c07cd2a9",
    "promotionLink": "/promotion/fa20aff4-4102-4450-b7a1-57f6808927e5",
    "enabled": true,
    "createdBy": {
      "id": 270,
      "username": "sofitelDubaiJumeirahBeach_pd",
      "firstName": "Phil",
      "lastName": "Duhs"
    }
  };
  
var initialisationData = {
    "promotionAddEditFormInitialisationData": {
      "hotel": {
        "id": 1490,
        "name": "SecurePay Demo",
        "currency": "AED",
        "currencyFormat": "#,####,##0.00"
      },
      "bccDepartments": [{
        "id": 0,
        "name": "Default",
        "users": []
      }],
      "templateDepartments": [{
        "id": 1494,
        "name": "Default",
        "templates": [{
          "id": 1600,
          "name": "Default Template"
        }
        ]
      }
      ],
      "templates": [
      {
        "id": 1600,
        "name": "Default Template",
        "html": "<table id=\"promotion\">\n\t    <tbody>\n\t        <tr>\n\t\t\t\t<td class=\"text-center\">\n\t\t\t\t\t<img class=\"promotion-image top10 bottom20\" alt=\"${hotelName}\" title=\"${hotelName}\" src=\"https://${securePayUrl}${securePayHttpsPort}/resources/hotels/${hotelCode}/images/${hotelCode}-logo.png\">\n\t\t\t\t</td>\n\t        </tr>\n\t        <tr>\n\t            <td>\n\t                <p><h4 class=\"promotion-title\">[-name-]</h4></p>\n\t            </td>\n\t        </tr>\n\t        <tr>\n\t            <td>\n\t                <span class=\"promotion-text\">[-promotionText-]</span>\n\t            </td>\n\t        </tr>\n\t        <tr>\n\t            <td class=\"promotion-options\">\n\t                [-previewOptions-]\n\t            </td>\n\t        </tr>\n\t        <tr>\n\t            <td>\n\t                <p><b class=\"counter-list total\"><span class=\"key\">Total To Pay</span><span class=\"value\"><span class=\"parameter_currency\">[-hotel.currency-]</span> <span class=\"parameter_amount\">[-amount-]</span></span></b></p>\n\t            </td>\n\t        </tr>\n\t        <tr>\n\t            <td>\n\t                <p class=\"top20\"><input type=\"checkbox\" id=\"acceptT&C\" name=\"acceptT&C\"><label for=\"acceptT&C\">I accept the [-hotel.name-]<a class=\"termsAndConditionsLink\"> Terms &amp; Conditions of Payment</a>.</label></p>\n\t            </td>\n\t        </tr>\n\t        <tr>\n\t            <td class=\"text-center\">\n\t            \t<a href=\"#\" class=\"${purchase.transactionTypeExpected}Button payPreAuthButton btn btn-success btn-sm disabled bottom20\" data-paymentProcessor=\"${paymentProcessor}\">Pay <span class=\"parameter_currency\">[-hotel.currency-]</span>&nbsp;<span class=\"parameter_amount\">[-amount-]</span></a>\n\t            </td>\n\t        </tr>\n\t        <tr>\n\t            <td>\n\t                <p>For any enquiries, or if you have any concerns about the authenticity of this email, please contact the <span class=\"contact\">[-contactName-]</span> at [-hotel.name-] at <a class=\"email\" href=\"mailto:[-contactEmail-]\">[-contactEmail-]</a> or by telephone on <a class=\"tel\" href=\"tel:[-contactPhone-]\">[-contactPhone-]</a>, or see answers to the Frequently Asked Questions below.</p>\n\t                <p>Kind Regards,<br>[-hotel.name-]</p>\n\t            </td>\n\t        </tr>\n\t        <tr>\n\t            <td>\n\t                <span class=\"footer-text\">[-footerText-]</span>\n\t            </td>\n\t        </tr>\n\t    </tbody>\n\t</table>"
      }
      ],
      "categories": [{
        "name": "Personal Info.",
        "description": "Required personal information",
        "questions": [{
          "shortTextQuestion": {
            "title": "First Name",
            "description": "Your first name",
            "mandatory": true,
            "contentType": "text"
          }
        },
        {
          "shortTextQuestion": {
            "title": "Last Name",
            "description": "Your surname",
            "mandatory": true,
            "contentType": "text"
          }
        },
        {
          "shortTextQuestion": {
            "title": "Email",
            "description": "Your email address",
            "mandatory": true,
            "contentType": "emailAddress"
          }
        },
        {
          "shortTextQuestion": {
            "title": "Phone",
            "description": "Your phone number",
            "mandatory": false,
            "contentType": "phoneNumber"
          }
        }
        ]
      }]
    }
  };

  document.addEventListener("DOMContentLoaded", ()=>{
    let iframe = document.getElementsByTagName('iframe')[0];
    let iWin = iframe.contentWindow;
    let iDoc = iWin.document;         

    iWin['promotionData'] = promotionData;
    iWin['initialisationData'] = initialisationData;
    
  });

        // window.addEventListener('load', ()=>{
        //     let iframe = document.getElementsByTagName('iframe')[0];
        //     let iWin = iframe.contentWindow;
        //     let iDoc = iWin.document;

        //     if (iDoc.readyState === 'complete') {
              
        //         iframe.src = "iframe.html";
                
        //         iWin.addEventListener('load', ()=>{
        //           console.log("iframe loaded", iWin);
        //           iWin['promotionData'] = promotionData;
        //           iWin['initialisationData'] = initialisationData;
        //         });
        //     }
        // });

        </script>
</head>

<body>
    <iframe src="iframe.html">
        Your browser does not support iframes!
    </iframe>

    <script>

        //let promotionDataId = window.location.href.match(/[?&]+([^=&]+)=([^&]*)/gi)?.[0] || '';
        //let timer = 0;
        //let JSESSIONID = '45622746ED0C89B4A94E3E7B9D2D45B7';
        //let JSESSIONIDCookie = 'JSESSIONID=' + JSESSIONID + ';';
        // let iframeInterval = setInterval(() => {
        //     try {
        //         iframe = document.getElementsByTagName('iframe')[0];
        //         iWin = iframe.contentWindow;
        //         iDoc = iWin.document;
        //         if (iDoc?.readyState === 'complete') {
        //             console.log("iframe loaded", iWin);
        //             //iWin.location.href = iWin.location.href + urlParams;
        //             //iDoc.cookie = JSESSIONIDCookie;
        //             iWin['varvar'] = 'Hello';
        //             // iDoc.addEventListener('promotion-cancel', () => {
        //             //     console.log("PROMOTION CANCEL");
        //             // });
        //             // iDoc.addEventListener('promotion-save', (e) => {
        //             //     console.log("PROMOTION CANCEL", e.detail);
        //             // });
        //             clearInterval(iframeInterval);
        //         }
        //         timer = + 100;
        //         if (timer >= 20000) clearInterval(iframeInterval);
        //     } catch (error) {
        //         clearInterval(iframeInterval);
        //     }
        // }, 100);
    
        //listen for a message from the addEditPromotion iFrame
        window.addEventListener("message", function (event) {
            //if (event.origin.indexOf("securepay.ae") > -1) {
                switch (event.data.action) {
                    case "promotion-init":
                        console.log("Promotion Initialized...");
                    // will need: parent.postMessage({"action" : "promotion-ready"}, "*");
                    case "promotion-ready":
                        //iframe.style.height = event.data.contentHeight + "px";
                        console.log("Promotion Ready...");
                        break;
                    // will need: parent.postMessage({"action" : "promotion-save"}, "*");
                    case "promotion-save":
                        console.log("Promotion Saved...");
                        sendPromotionData(event.data.data);
    
                        async function sendPromotionData(data){
                            let csrfParameterName = document.querySelector("meta[name='_csrf_parameter']").getAttribute('content');
                            let csrfParameterValue = document.querySelector("meta[name='" + csrfParameterName + "']").getAttribute('content');
                            try{
                                var res = await fetch(`/admin/promotions/submitPromotion`, {
                                    method: 'POST',
                                    credentials: 'include',
                                    headers: {
                                    'Accept': 'application/json, text/plain, */*',
                                    'Content-Type': 'application/json',
                                    'X-Requested-With': 'XMLHttpRequest',
                                    'X-CSRF-TOKEN': csrfParameterValue
                                    },
                                    body: JSON.stringify(data)
                                });
                                return res;
                            } catch (error) {
                                console.error(error)
                            }
                        }
                        break;
                    // will need: parent.postMessage({"action" : "promotion-cancel"}, "*");
                    case "promotion-cancel":
                        console.log("Promotion Cancelled...");
                        window.location.href = '/admin/promotions/promotionManagement.html';
                        break;
                }
            //}
        });

        document.addEventListener("DOMContentLoaded", ()=>{
          let iframe = document.getElementsByTagName('iframe')[0];
          let iWin = iframe.contentWindow;
          let iDoc = iWin.document; 
          let option1Btn = document.querySelector('.option1');
          let option2Btn = document.querySelector('.option2');
          option1Btn.addEventListener('click', ()=>{
            iWin.postMessage({"action": "promotion-set", "promotionData": promotionData, "initialisationData": initialisationData }, "*");
          });
          option2Btn.addEventListener('click', ()=>{
            iWin.postMessage({"action": "promotion-set", "promotionData": promotionData2, "initialisationData": initialisationData }, "*");
          });
        })
    
        </script>

<button class="option-btn option1">set option 1</button>
<button class="option-btn option2">set option 2</button>
</body>

</html>